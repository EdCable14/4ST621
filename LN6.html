<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Adam Cabla">

<title>4ST621 - Selected Continuous Distributions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">4ST621</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./Course_Intro.html" rel="" target="" aria-current="page">
 <span class="menu-text">Course Introduction</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./LN1.html">Probability Theory</a></li><li class="breadcrumb-item"><a href="./LN6.html">Selected Continuous Distributions</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Course_Intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Probability Theory</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./LN1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Basics of Probability</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./LN2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Random Variable</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./LN3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Characteristics of Random Variables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./LN4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Random Vectors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./LN5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Selected Discrete Distributions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./LN6.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Selected Continuous Distributions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./LN7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Two Selected Multivariate Distributions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./LN8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Stochastic convergences</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Mathematical Statistics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./LN9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sampling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./LN10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Point estimates</span></a>
  </div>
</li>
          <li class="sidebar-item">
 <span class="menu-text">LN11.qmd</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">LN12.qmd</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">LN13.qmd</span>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#continuous-uniform-distribution-xsim-uab" id="toc-continuous-uniform-distribution-xsim-uab" class="nav-link" data-scroll-target="#continuous-uniform-distribution-xsim-uab">Continuous uniform distribution <span class="math inline">\(X\sim U(a,b)\)</span></a></li>
  <li><a href="#exponential-distribution-xsim-elambda" id="toc-exponential-distribution-xsim-elambda" class="nav-link" data-scroll-target="#exponential-distribution-xsim-elambda">Exponential distribution <span class="math inline">\(X\sim E(\lambda)\)</span></a></li>
  <li><a href="#normal-gaussian-distribution-xsim-nmusigma" id="toc-normal-gaussian-distribution-xsim-nmusigma" class="nav-link" data-scroll-target="#normal-gaussian-distribution-xsim-nmusigma">Normal (Gaussian) distribution <span class="math inline">\(X\sim N(\mu,\sigma)\)</span></a></li>
  <li><a href="#log-normal-galton-distribution-x-sim-lnmusigma" id="toc-log-normal-galton-distribution-x-sim-lnmusigma" class="nav-link" data-scroll-target="#log-normal-galton-distribution-x-sim-lnmusigma">Log-normal (Galton) distribution <span class="math inline">\(X \sim LN(\mu,\sigma)\)</span></a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Selected Continuous Distributions</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Adam Cabla </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>In this part, we will continue with specific named probability distributions but focus on some continuous probability distributions.</p>
</section>
<section id="continuous-uniform-distribution-xsim-uab" class="level2">
<h2 class="anchored" data-anchor-id="continuous-uniform-distribution-xsim-uab">Continuous uniform distribution <span class="math inline">\(X\sim U(a,b)\)</span></h2>
<p>This is likely the simplest continuous probability distribution. Uniform means equal probabilities for a discrete case or constant probability density function for a continuous case.</p>
<p>This distribution has limited real-world use, e.g.&nbsp;as a model of the waiting time for the regularly repeating event. Maybe the more important role of this distribution is its use in generating random numbers. Having generated a random value from the <span class="math inline">\(X\sim U(0,1)\)</span> distribution, it can be an input to the quantile function of any desired random variable, generating a random value from that random variable.</p>
<p>From the constant probability density function, we can derive that it is</p>
<p><span class="math display">\[
f(x)=\frac{1}{b-a}
\]</span></p>
<p>for <span class="math inline">\(x\in [a,b]\)</span> and <span class="math inline">\(-\infty&lt;a&lt;b&lt;\infty\)</span>.</p>
<p>For probability calculations, the cumulative distribution function is usually easier to use</p>
<p><span class="math display">\[
F(x)=\frac{x-a}{b-a}
\]</span></p>
<p>and the quantile function, the inverse of the cumulative distribution function</p>
<p><span class="math display">\[
Q(P)=a+(b-a)P
\]</span></p>
<p>There is not much more to be said about this distribution; maybe the most common special case 𝑋∼𝑈(0,1) is called standard uniform distribution.</p>
</section>
<section id="exponential-distribution-xsim-elambda" class="level2">
<h2 class="anchored" data-anchor-id="exponential-distribution-xsim-elambda">Exponential distribution <span class="math inline">\(X\sim E(\lambda)\)</span></h2>
<p>Let´s assume that random events are not regularly repeating but occurring randomly throughout time and independently of each other. The rate of occurrence of these events is the parameter <span class="math inline">\(\lambda\)</span>, the one we have already seen in the Poisson distribution with the same assumptions.</p>
<p>The focus of the Poisson distribution is the number of <em>events</em> in a specified interval; the focus of the exponential distribution is time to the first occurrence of the <em>event</em>. With the mentioned assumptions, this time follows the exponential distribution described by the following functions.</p>
<p><span class="math display">\[
f(x)=\lambda \exp(-\lambda x)
\]</span></p>
<p><span class="math display">\[
F(x)=1-\exp(-\lambda x)
\]</span></p>
<p><span class="math display">\[
Q(P)=-\frac{-\ln (1-P)}{\lambda}
\]</span></p>
<p>for <span class="math inline">\(x\in(0;\infty)\)</span> and <span class="math inline">\(\lambda \in [0,\infty)\)</span>.</p>
<p>The two main moment characteristics of this distribution are</p>
<p><span class="math display">\[
E(X)=\frac{1}{\lambda}
\]</span></p>
<p><span class="math display">\[
Var(X)=\frac{1}{\lambda^2}
\]</span></p>
<p>The exponential and the Poisson distributions are intertwined and serve as the basis for analysing the so-called Poisson process. An exponential distribution is useful in other contexts; for example, it can serve as a model of the right tail of an unknown underlying distribution, which is useful in risk modelling.</p>
<p>In some distributions, especially continuous ones, parameters are not set in stone, and different parametrisations of the distribution can be used to shift focus on various properties. Of course, all the functions describing the probability distribution and its characteristics must be adjusted to the parametrisation of choice.</p>
<p>For exponential distribution, one might stumble upon using the scale parameter, which is the inverse of the rate parameter <span class="math inline">\(\sigma=\frac{1}{\lambda}\)</span>. This parametrisation might be useful in contexts where the focus is not the random events’ occurrence rate but the expected value because <span class="math inline">\(E(X)=\delta\)</span>.</p>
</section>
<section id="normal-gaussian-distribution-xsim-nmusigma" class="level2">
<h2 class="anchored" data-anchor-id="normal-gaussian-distribution-xsim-nmusigma">Normal (Gaussian) distribution <span class="math inline">\(X\sim N(\mu,\sigma)\)</span></h2>
<p>The normal distribution is pervasive in statistics because of its presence as a limited distribution of various statistics, most importantly summation. Normality assumption also simplifies a lot of calculations due to its properties. This makes it very useful in many contexts regarding estimates, which is the topic of the second large part of this lecture notes.</p>
<p>The probability density of the normal distribution is</p>
<p><span class="math display">\[
f(x)=\frac{1}{\sigma \sqrt{2\pi}}e^{- \frac{(x-\mu)^2}{2\sigma^2}}
\]</span></p>
<p>For <span class="math inline">\(x \in (-\infty;\infty)\)</span> and <span class="math inline">\(\mu \in (-\infty, \infty)\)</span>, <span class="math inline">\(\sigma \in(0,\infty)\)</span>.</p>
<p>Integrating this density to get the cumulative distribution function is not analytically solvable, so we do not have a simple closed formula for evaluating its value.</p>
<p><span class="math display">\[
F(x)=\int_{-\infty}^x \frac{1}{\sigma \sqrt{2\pi}}e^{- \frac{(t-\mu)^2}{2\sigma^2}}dt
\]</span></p>
<p>We do not have the closed formula for the quantile function based on the same argument. Characteristics of this random variable are straightforward from the parameters.</p>
<p><span class="math display">\[
E(X)=\mu
\]</span></p>
<p><span class="math display">\[
Var(X)=\sigma^2
\]</span></p>
<p>Nowadays, obtaining probabilities and quantiles of normal distribution is an easy task due to the computational power of computers. Historically, it was a little more complicated, though. Numerical evaluation of the integrals was a tiresome task. Still, luckily for the normal distribution, our ancestors could use one property - any linear transformation of the normal distribution is also normally distributed.</p>
<p>That means that any normal distribution could be transformed by standardisation (recall standard moments), and the result would be a standard normal distribution with zero expected value and unit variance. This distribution is so prominent that it has its specific notation: <span class="math inline">\(Z\sim N(0,1)\)</span>.</p>
<p>So, the need to calculate the integrals was reduced to only one distribution, and results were tabulated for general use. Hence, for <span class="math inline">\(X\sim N(\mu, \sigma)\)</span>, we can write</p>
<p><span class="math display">\[
Z=\frac{X-\mu}{\sigma} \sim N(0,1)
\]</span></p>
<p><span class="math display">\[
F(x)= \Phi \left(\frac {x-\mu}{\sigma}\right)=\Phi(z)
\]</span></p>
<p><span class="math display">\[
x_p=\mu+\sigma z_p
\]</span></p>
<p>Where <span class="math inline">\(\Phi\)</span> is a notation for the cumulative distribution function of standard normal distribution <span class="math inline">\(Z \sim N(0,1)\)</span>, and <span class="math inline">\(z_p\)</span> is the 100<em>P</em>% quantile of the standard normal distribution, both to be found in the appropriate tables.</p>
<p>Another property of normal distribution worth mentioning is its symmetry around the expected value. For standard normal distribution, it means symmetry around 0, which leads to two relations used to simplify the tables mentioned above:</p>
<p><span class="math display">\[
\Phi(z)=1-\Phi(-z)
\]</span></p>
<p><span class="math display">\[
z_p=-z_{1-p}
\]</span></p>
<p>The standard normal distribution has become so pervasive that it is still used in statistics, e.g., in the form of <em>z</em>-<em>scores</em> or <em>critical values</em> for constructing <em>rejection regions</em>.</p>
<p><em>Z</em>-<em>scores</em> show how many standard deviations the value is from the variable’s mean (or the random variable´s expected value to stay in probability theory).</p>
</section>
<section id="log-normal-galton-distribution-x-sim-lnmusigma" class="level2">
<h2 class="anchored" data-anchor-id="log-normal-galton-distribution-x-sim-lnmusigma">Log-normal (Galton) distribution <span class="math inline">\(X \sim LN(\mu,\sigma)\)</span></h2>
<p>If the normal distribution rises as the distribution of a summation, there has to exist the distribution of a product. This is a log-normal distribution. The name suggests its relation to the normal distribution.</p>
<p><span class="math display">\[
X\sim LN(\mu,\sigma) \to Y=\log (X) \sim N(\mu, \sigma)
\]</span></p>
<p><span class="math display">\[
Y\sim N(\mu,\sigma) \to X=\exp (Y) \sim LN(\mu, \sigma)
\]</span></p>
<p>Again, the cumulative distribution and quantile function do not have an analytical solution; hence, the relation was used.</p>
<p><span class="math display">\[
Z=\frac{\log(x)-\mu}{\sigma} \sim N(0,1)
\]</span> <span class="math display">\[x_p=e^{\mu+\sigma z_p}\]</span></p>
<p>You can notice that parameters are the expected value and standard deviation of the log-transformed version of this distribution, not directly equal to them. Characteristics have to be obtained using formulas.</p>
<p><span class="math display">\[
E(X)=e^{\mu+\frac {\sigma^2}{2}}
\]</span></p>
<p><span class="math display">\[
Var(X)=e^{2\mu+\sigma^2}*\left(e^{\sigma^2} -1\right)
\]</span></p>
<p>This distribution is well-known and often used in statistical modelling for its shape - it is right-skewed and heavy-tailed, meaning it is suitable for the distribution with possible occurrences of extreme values.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>